(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a72d5ff"],{1189:function(e,t,a){},"1cac":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"adList"},[a("el-card",{staticClass:"card",attrs:{shadow:"always","body-style":{padding:"20px"}}},[a("div",{attrs:{slot:"header"},slot:"header"},[a("span",[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.addAd}},[e._v("新增")])],1)]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{label:"序号",type:"index",fixed:"left",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"pic",label:"广告图片","min-width":"150px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.pic,alt:""}})]}}])}),a("el-table-column",{attrs:{label:"展示时间","min-width":"300px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v("开始时间: "+e._s(t.row.startTime))]),a("p",[e._v("结束时间: "+e._s(t.row.endTime))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"广告名称","min-width":"200px",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"clickCount",label:"点击数","min-width":"200px",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"orderCount",label:"下单数","min-width":"200px",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"type",label:"轮播位置","min-width":"200px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("filterType")(t.row.type)))])]}}])}),a("el-table-column",{attrs:{prop:"url",label:"链接地址","min-width":"200px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{href:t.row.url,target:"_blank"}},[e._v(e._s(t.row.url))])]}}])}),a("el-table-column",{attrs:{prop:"note",label:"备注","min-width":"200px",align:"center","header-align":"center"}}),a("el-table-column",{attrs:{prop:"orderCount",label:"上下线状态","min-width":"200px",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e._f("filterStatus")(t.row.status)))])]}}])}),a("el-table-column",{attrs:{fixed:"right",label:"操作","min-width":"100px",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.editAd(t.row)}}},[e._v("编辑")]),a("el-button",{staticStyle:{color:"red"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.delAd(t.row.id)}}},[e._v("删除")])]}}])})],1)],1),a("detail-com",{ref:"detail",on:{success:e.detailSuccess}})],1)},r=[],l=a("b775");function n(){return Object(l["a"])({url:"/lejuAdmin/advertise/adsList"})}function i(e){return Object(l["a"])({url:"/lejuAdmin/advertise/delAds/".concat(e),method:"delete"})}function o(e){return Object(l["a"])({url:"/lejuAdmin/advertise/addAds",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/lejuAdmin/advertise/updateAds",method:"post",data:e})}var d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"detail"},[a("el-dialog",{attrs:{title:"广告详情",visible:e.open,width:"50%"},on:{"update:visible":function(t){e.open=t}}},[a("el-form",{ref:"form",attrs:{model:e.adsParams,rules:e.rules,"label-width":"80px",inline:!1,size:"mini"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"name",label:"广告名称"}},[a("el-input",{model:{value:e.adsParams.name,callback:function(t){e.$set(e.adsParams,"name",t)},expression:"adsParams.name"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"note",label:"备注"}},[a("el-input",{model:{value:e.adsParams.note,callback:function(t){e.$set(e.adsParams,"note",t)},expression:"adsParams.note"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"sort",label:"排序"}},[a("el-input",{model:{value:e.adsParams.note,callback:function(t){e.$set(e.adsParams,"note",t)},expression:"adsParams.note"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"orderCount",label:"下单数量"}},[a("el-input",{model:{value:e.adsParams.orderCount,callback:function(t){e.$set(e.adsParams,"orderCount",t)},expression:"adsParams.orderCount"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"url",label:"链接"}},[a("el-input",{model:{value:e.adsParams.url,callback:function(t){e.$set(e.adsParams,"url",t)},expression:"adsParams.url"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"type",label:"轮播位置"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.adsParams.type,callback:function(t){e.$set(e.adsParams,"type",t)},expression:"adsParams.type"}},[a("el-option",{attrs:{label:"APP首页轮播",value:"0"}}),a("el-option",{attrs:{label:"其他",value:"1"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"startTime",label:"开始时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"开始时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.adsParams.startTime,callback:function(t){e.$set(e.adsParams,"startTime",t)},expression:"adsParams.startTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"endTime",label:"结束时间"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"结束时间","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:e.adsParams.endTime,callback:function(t){e.$set(e.adsParams,"endTime",t)},expression:"adsParams.endTime"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"promotionPerLimit",label:"上下线状态"}},[a("el-switch",{model:{value:e.adsParams.status,callback:function(t){e.$set(e.adsParams,"status",t)},expression:"adsParams.status"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"图片"}},[a("el-upload",{staticClass:"avatar-uploader",staticStyle:{width:"100%"},attrs:{headers:e.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",multiple:!1,limit:1,"on-success":e.getCoverUrl,"show-file-list":!1,"before-upload":e.beforeAvatarUpload}},[e.adsParams.pic?a("img",{staticClass:"avatar",attrs:{src:e.adsParams.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.open=!1}}},[e._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("确定")])],1)],1)],1)},u=[],m=a("2f4d"),p={data:function(){return{headers:{token:Object(m["b"])()},open:!1,detailObj:{},adsParams:{clickCount:"",createTime:"",endTime:"",id:"",modifyTime:"",name:"",note:"",orderCount:"",pic:"",productId:"",sort:"",startTime:"",status:!1,type:"",url:""},rules:{name:[{required:!0,message:"请填写广告名称",trigger:"blur"}]}}},mounted:function(){},methods:{onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.error("请填写必要信息"),!1;e.$confirm("是否确认".concat(e.detailObj?"修改":"新增","广告?"),"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.adsParams.status=e.adsParams.status?1:0,e.detailObj?c(e.adsParams).then((function(t){console.log(t),t.success?(e.open=!1,e.$emit("success"),e.formReset(),e.$message.success("修改成功")):e.$message.error("修改失败")})):o(e.adsParams).then((function(t){console.log(t),t.success?(e.open=!1,e.$emit("success"),e.formReset(),e.$message.success("添加成功")):e.$message.error("添加失败")}))})).catch((function(e){console.log(e)}))}))},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传的图片只能是 JPG 或 PNG 格式!"),a||this.$message.error("上传的图片大小不能超过 2MB!"),t&&a},getCoverUrl:function(e){console.log(e),this.adsParams.pic=e.data.fileUrl},openDetail:function(e){console.log(e),this.detailObj=e,this.open=!0,this.detailObj?this.adsParams=e:this.formReset()},formReset:function(){this.adsParams={clickCount:"",createTime:"",endTime:"",id:"",modifyTime:"",name:"",note:"",orderCount:"",pic:"",productId:"",sort:"",startTime:"",status:!1,type:"",url:""}}}},f=p,b=(a("a877"),a("cba8")),h=Object(b["a"])(f,d,u,!1,null,"16b5bca4",null),g=h.exports,v={components:{detailCom:g},filters:{filterType:function(e){return 0===e?"首页轮播":"其他"},filterStatus:function(e){return 0===e?"下线":1===e?"上线":void 0}},data:function(){return{list:[],form:{clickCount:"",createTime:"",endTime:"",id:"",modifyTime:"",name:"",note:"",orderCount:"",pic:"",productId:"",sort:"",startTime:"",status:"",type:"",url:""}}},created:function(){this.init()},mounted:function(){},methods:{detailSuccess:function(){this.init()},addAd:function(){this.$refs.detail.openDetail()},editAd:function(e){this.$refs.detail.openDetail(e)},delAd:function(e){var t=this;i(e).then((function(e){console.log(e),t.init()}))},init:function(){var e=this;n().then((function(t){console.log(t),e.list=t.data.items}))}}},y=v,P=Object(b["a"])(y,s,r,!1,null,"e25ed284",null);t["default"]=P.exports},a877:function(e,t,a){"use strict";a("1189")}}]);