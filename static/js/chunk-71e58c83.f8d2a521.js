(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71e58c83"],{"0560":function(t,e,o){"use strict";var i=o("88d4"),r=o("34cd").find,a=o("d421"),s="find",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},1926:function(t,e,o){"use strict";var i=o("88d4"),r=o("ce5b"),a=o("587c"),s=o("63ef"),l=o("fbe3"),n=r([].join),c=a!=Object,u=l("join",",");i({target:"Array",proto:!0,forced:c||!u},{join:function(t){return n(s(this),void 0===t?",":t)}})},"2f16":function(t,e,o){"use strict";o.r(e);var i,r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addGoodsDetail"},[o("div",{staticClass:"steps-wrapper"},[o("el-steps",{staticClass:"step-bar",attrs:{active:t.active,"finish-status":"success","align-center":""}},[o("el-step",{attrs:{title:"商品基本信息"}}),o("el-step",{attrs:{title:"添加库存信息"}}),o("el-step",{attrs:{title:"添加移动端详情"}})],1)],1),o("el-card",{staticClass:"card forms",attrs:{shadow:"never","body-style":{padding:"20px"}}},[o("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[0==t.active?o("div",{staticClass:"basic"},[o("div",{staticClass:"form-section-head"},[t._v("基本信息")]),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品名称",size:"small"}},[o("el-input",{attrs:{placeholder:"商品名称"},model:{value:t.form.product.name,callback:function(e){t.$set(t.form.product,"name",e)},expression:"form.product.name"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品编码",size:"small"}},[o("el-input",{attrs:{placeholder:"商品编码"},model:{value:t.form.product.productSn,callback:function(e){t.$set(t.form.product,"productSn",e)},expression:"form.product.productSn"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品分类",size:"small"}},[o("el-select",{attrs:{placeholder:"商品分类"},on:{change:t.getCategoryName},model:{value:t.form.product.productCategoryId,callback:function(e){t.$set(t.form.product,"productCategoryId",e)},expression:"form.product.productCategoryId"}},t._l(t.categoryList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品品牌",size:"small"}},[o("el-select",{attrs:{placeholder:"商品品牌"},on:{change:t.getBrandName},model:{value:t.form.product.brandId,callback:function(e){t.$set(t.form.product,"brandId",e)},expression:"form.product.brandId"}},t._l(t.brandList,(function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1),o("el-row",[o("el-col",{attrs:{span:16}},[o("el-form-item",{attrs:{label:"商品描述",size:"small"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.product.description,callback:function(e){t.$set(t.form.product,"description",e)},expression:"form.product.description"}})],1)],1)],1),o("div",{staticClass:"form-section-head"},[t._v("商品属性")]),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品原价",size:"small"}},[o("el-input-number",{attrs:{min:0},model:{value:t.form.product.originalPrice,callback:function(e){t.$set(t.form.product,"originalPrice",e)},expression:"form.product.originalPrice"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"促销类型",size:"small"}},[o("el-select",{attrs:{disabled:!0,placeholder:"促销类型"},model:{value:t.form.product.promotionType,callback:function(e){t.$set(t.form.product,"promotionType",e)},expression:"form.product.promotionType"}},[o("el-option",{attrs:{label:"没有促销，使用原价",value:0}})],1)],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"活动价格",size:"small"}},[o("el-input-number",{attrs:{disabled:!0,min:0},model:{value:t.form.product.promotionPrice,callback:function(e){t.$set(t.form.product,"promotionPrice",e)},expression:"form.product.promotionPrice"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"重量(kg)",size:"small"}},[o("el-input-number",{attrs:{min:0},model:{value:t.form.product.weight,callback:function(e){t.$set(t.form.product,"weight",e)},expression:"form.product.weight"}})],1)],1)],1),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"审核状态",size:"small"}},[o("el-switch",{model:{value:t.form.product.verifyStatus,callback:function(e){t.$set(t.form.product,"verifyStatus",e)},expression:"form.product.verifyStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"是否上架",size:"small"}},[o("el-switch",{model:{value:t.form.product.publishStatus,callback:function(e){t.$set(t.form.product,"publishStatus",e)},expression:"form.product.publishStatus"}})],1)],1)],1),o("el-row",[o("el-col",[o("el-form-item",{attrs:{label:"缩略图",size:"small"}},[o("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",multiple:!1,limit:1,"on-success":t.getCoverUrl,"show-file-list":!1,"before-upload":t.beforeAvatarUpload}},[t.form.product.pic?o("img",{staticClass:"avatar",attrs:{src:t.form.product.pic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),o("div",{staticClass:"form-section-head"},[t._v("其他信息")]),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"推荐状态",size:"small"}},[o("el-switch",{model:{value:t.form.product.recommendStatus,callback:function(e){t.$set(t.form.product,"recommendStatus",e)},expression:"form.product.recommendStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"新品状态",size:"small"}},[o("el-switch",{model:{value:t.form.product.newStatus,callback:function(e){t.$set(t.form.product,"newStatus",e)},expression:"form.product.newStatus"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"预告商品",size:"small"}},[o("el-switch",{model:{value:t.form.product.previewStatus,callback:function(e){t.$set(t.form.product,"previewStatus",e)},expression:"form.product.previewStatus"}})],1)],1)],1),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"搜索关键词","label-width":"90px",size:"small"}},[o("el-input",{attrs:{placeholder:"关键词之间用,隔开"},model:{value:t.form.product.keywords,callback:function(e){t.$set(t.form.product,"keywords",e)},expression:"form.product.keywords"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"库存预警",size:"small"}},[o("el-input-number",{attrs:{min:0},model:{value:t.form.product.lowStock,callback:function(e){t.$set(t.form.product,"lowStock",e)},expression:"form.product.lowStock"}})],1)],1),o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"商品排序",size:"small"}},[o("el-input-number",{attrs:{min:0},model:{value:t.form.product.sort,callback:function(e){t.$set(t.form.product,"sort",e)},expression:"form.product.sort"}})],1)],1)],1),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"产品服务",size:"small"}},[o("el-checkbox-group",{model:{value:t.serviceList,callback:function(e){t.serviceList=e},expression:"serviceList"}},[o("el-checkbox",{attrs:{label:"1"}},[t._v("无忧退货")]),o("el-checkbox",{attrs:{label:"2"}},[t._v("快速退款")]),o("el-checkbox",{attrs:{label:"3"}},[t._v("免费包邮")])],1)],1)],1)],1)],1):t._e(),1==t.active?o("div",{staticClass:"sku"},[o("div",{staticClass:"form-section-head"},[t._v("商品sku信息")]),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:8}},[o("el-form-item",{attrs:{label:"标题",size:"small"}},[o("el-input",{attrs:{placeholder:"标题"},model:{value:t.form.product.detailTitle,callback:function(e){t.$set(t.form.product,"detailTitle",e)},expression:"form.product.detailTitle"}})],1)],1),o("el-col",{attrs:{span:12}},[o("el-form-item",{attrs:{label:"副标题",size:"small"}},[o("el-input",{attrs:{placeholder:"副标题"},model:{value:t.form.product.subTitle,callback:function(e){t.$set(t.form.product,"subTitle",e)},expression:"form.product.subTitle"}})],1)],1)],1),o("el-row",{attrs:{gutter:25}},[o("el-col",{attrs:{span:24}},[o("el-form-item",{attrs:{label:"画册图片",size:"small"}},[o("el-upload",{attrs:{headers:t.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",multiple:!1,limit:5,"file-list":t.fileList,"on-success":t.getAlbumUrl,"show-file-list":!0,"before-upload":t.beforeAvatarUpload,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"on-exceed":t.handleExceed}},[o("i",{staticClass:"el-icon-plus"}),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(" 只能上传jpg/png文件，且不超过2Mb，文件数量不超过5个 ")])]),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)],1)],1),o("el-form-item",{staticClass:"skuSetting",attrs:{label:"sku设置","label-width":"100px"}},[o("div",{staticClass:"colorList"},[t._v(" 颜色： "),o("el-checkbox-group",{model:{value:t.selectedColor,callback:function(e){t.selectedColor=e},expression:"selectedColor"}},t._l(t.colorList,(function(e,i){return o("el-checkbox",{key:e.id,attrs:{label:e.val}},[t._v(" "+t._s(e.val)),o("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.delColor(i)}}},[t._v("删除")])],1)})),1)],1),o("div",{staticClass:"sizeList"},[t._v(" 大小： "),o("el-checkbox-group",{model:{value:t.selectedSize,callback:function(e){t.selectedSize=e},expression:"selectedSize"}},t._l(t.sizeList,(function(e,i){return o("el-checkbox",{key:e.id,attrs:{label:e.val}},[t._v(" "+t._s(e.val)),o("el-button",{staticStyle:{color:"red","margin-left":"10px"},attrs:{type:"text",size:"small"},on:{click:function(e){return t.delSize(i)}}},[t._v("删除")])],1)})),1)],1),o("div",{staticClass:"sku-create"},[o("div",{staticClass:"color-create"},[o("el-input",{staticClass:"mr10",staticStyle:{width:"200px","margin-right":"10px"},attrs:{placeholder:"颜色描述：比如土豪金",size:"small"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),o("el-button",{staticClass:"mr10",attrs:{size:"small"},on:{click:t.addColor}},[t._v("创建颜色选项")])],1),o("div",{staticClass:"size-create"},[o("el-input",{staticClass:"mr10",staticStyle:{width:"200px"},attrs:{placeholder:"大小描述：比如128g",size:"small"},model:{value:t.size,callback:function(e){t.size=e},expression:"size"}}),o("el-button",{staticClass:"mr10",attrs:{size:"small"},on:{click:t.addSize}},[t._v("创建大小选项")])],1),o("div",{staticClass:"sku-btns"},[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.generateSkuList}},[t._v("生成sku列表")]),o("el-button",{attrs:{type:"primary",size:"small"}},[t._v("新增sku")])],1)]),t.form.pmsSkuStockList.length>0?o("div",{staticClass:"sku-table"},[o("el-table",{attrs:{data:t.form.pmsSkuStockList,border:"",stripe:"",size:"mini"}},[o("el-table-column",{attrs:{type:"index",label:"#",width:"50",fixed:"left",align:"center"}}),o("el-table-column",{attrs:{prop:"pic",label:"图片",width:"120","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.headers,action:"http://leju.bufan.cloud/lejuAdmin/material/uploadFileOss",multiple:!1,limit:1,"on-success":function(o){return t.uploadSkuPic(o,e.row.ids)},"show-file-list":!1,"before-upload":t.beforeAvatarUpload}},[e.row.pic?o("img",{staticClass:"avatar",attrs:{src:e.row.pic}}):o("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])]}}],null,!1,3805744122)}),o("el-table-column",{attrs:{prop:"spData[0].value",label:"颜色",width:"160","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:""},model:{value:e.row.spData[0].value,callback:function(o){t.$set(e.row.spData[0],"value",o)},expression:"scope.row.spData[0].value"}})]}}],null,!1,2153597456)}),o("el-table-column",{attrs:{prop:"spData[1].value",label:"大小",width:"160","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:""},model:{value:e.row.spData[1].value,callback:function(o){t.$set(e.row.spData[1],"value",o)},expression:"scope.row.spData[1].value"}})]}}],null,!1,1713912881)}),o("el-table-column",{attrs:{prop:"stock",label:"库存",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"自定义库存"},model:{value:e.row.stock,callback:function(o){t.$set(e.row,"stock",o)},expression:"scope.row.stock"}})]}}],null,!1,3702482658)}),o("el-table-column",{attrs:{prop:"lowStock",label:"预警库存",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"预警库存"},model:{value:e.row.lowStock,callback:function(o){t.$set(e.row,"lowStock",o)},expression:"scope.row.lowStock"}})]}}],null,!1,4199792205)}),o("el-table-column",{attrs:{prop:"lockStock",label:"锁定库存",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"锁定库存"},model:{value:e.row.lockStock,callback:function(o){t.$set(e.row,"lockStock",o)},expression:"scope.row.lockStock"}})]}}],null,!1,1348480683)}),o("el-table-column",{attrs:{prop:"skuCode",label:"sku编码",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"sku编码，可选是否上传"},model:{value:e.row.skuCode,callback:function(o){t.$set(e.row,"skuCode",o)},expression:"scope.row.skuCode"}})]}}],null,!1,1296196035)}),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"价格"},model:{value:e.row.price,callback:function(o){t.$set(e.row,"price",o)},expression:"scope.row.price"}})]}}],null,!1,492827702)}),o("el-table-column",{attrs:{prop:"sale",label:"销量",width:"200","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"销量"},model:{value:e.row.sale,callback:function(o){t.$set(e.row,"sale",o)},expression:"scope.row.sale"}})]}}],null,!1,2742439236)}),o("el-table-column",{attrs:{label:"操作",width:"200","header-align":"center",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return t.delSku(e.row.ids)}}},[t._v("删除")])]}}],null,!1,1163744805)})],1)],1):t._e()])],1):t._e(),2==t.active?o("div",{staticClass:"mInfo"},[o("div",{staticClass:"form-section-head"},[t._v("详情描述")]),o("el-form-item",{attrs:{label:"商品详情",size:"small"}},[o("tinymce",{model:{value:t.form.product.detailMobileHtml,callback:function(e){t.$set(t.form.product,"detailMobileHtml",e)},expression:"form.product.detailMobileHtml"}})],1),o("el-form-item",{attrs:{label:"备注",size:"small"}},[o("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.form.product.note,callback:function(e){t.$set(t.form.product,"note",e)},expression:"form.product.note"}})],1)],1):t._e(),o("div",{staticClass:"bottom-btns"},[0!=t.active?o("el-button",{attrs:{size:"small"},on:{click:t.prevStep}},[t._v("返回上一步")]):t._e(),2!=t.active?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.nextStep}},[t._v(t._s(t.nextBtnText))]):t._e(),2==t.active?o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.submit}},[t._v("提交保存")]):t._e()],1)])],1)],1)},a=[],s=(o("89a8"),o("1a91"),o("4c1e"),o("fee8"),o("87d5"),o("1926"),o("3ef3"),o("993f"),o("0560"),o("8ea3"),o("10dd"),o("f3b6")),l=o("40a2"),n=o("dabb"),c=o("2f4d"),u=new Uint8Array(16);function d(){if(!i&&(i="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!i))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(u)}var p=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function m(t){return"string"===typeof t&&p.test(t)}for(var f=m,h=[],b=0;b<256;++b)h.push((b+256).toString(16).substr(1));function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=(h[t[e+0]]+h[t[e+1]]+h[t[e+2]]+h[t[e+3]]+"-"+h[t[e+4]]+h[t[e+5]]+"-"+h[t[e+6]]+h[t[e+7]]+"-"+h[t[e+8]]+h[t[e+9]]+"-"+h[t[e+10]]+h[t[e+11]]+h[t[e+12]]+h[t[e+13]]+h[t[e+14]]+h[t[e+15]]).toLowerCase();if(!f(o))throw TypeError("Stringified UUID is invalid");return o}var g=v;function y(t,e,o){t=t||{};var i=t.random||(t.rng||d)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,e){o=o||0;for(var r=0;r<16;++r)e[o+r]=i[r];return e}return g(i)}var k=y,w=o("8256"),S={components:{tinymce:w["a"]},data:function(){return{active:0,categoryList:[],brandList:[],serviceList:[],dialogImageUrl:"",AlbumList:[],fileList:[],dialogVisible:!1,color:"",selectedColor:[],colorList:[{id:"435432",val:"红色"},{id:"4684534",val:"白色"}],size:"",selectedSize:[],sizeList:[{id:"84796456143",val:"128g"},{id:"5146548",val:"256g"}],headers:{token:Object(c["b"])()},form:{pmsSkuStockList:[],product:{albumPics:"",brandId:"",brandName:"",createTime:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:"",giftGrowth:0,giftPoint:0,id:"",keywords:"",lowStock:0,modifyTime:"",name:"",newStatus:!1,note:"",originalPrice:0,pic:"",previewStatus:!1,price:0,productAttributeCategoryId:"",productCategoryId:"",productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:0,promotionStartTime:"",promotionType:0,publishStatus:!1,recommendStatus:!1,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:!1,weight:0}}}},computed:{nextBtnText:function(){return 0===this.active?"下一步,填写库存信息":1===this.active?"下一步,填写移动端详情":""}},created:function(){var t=this;this.$route.query.id&&Object(s["c"])(this.$route.query.id).then((function(e){console.log(e),e.data.skus.forEach((function(t){function e(t){return t=JSON.parse(t),"string"===typeof t?e(t):t}console.log(t.spData);var o=e(t.spData);console.log(o),t.spData=o})),console.log(e.data.skus),t.form.pmsSkuStockList=e.data.skus,t.form.product=e.data.product;var o=e.data.product.albumPics.split(",");console.log(o),o.forEach((function(e){var o=e.split("/"),i={url:e,name:o[o.length-1]};t.fileList.push(i)})),console.log(t.fileList),t.init(),console.log(t.form)})),this.init(),console.log(this.form)},mounted:function(){},methods:{submit:function(){var t=this;this.form.pmsSkuStockList.forEach((function(t){t.spData=JSON.stringify(t.spData)})),this.form.product.newStatus=this.form.product.newStatus?1:0,this.form.product.previewStatus=this.form.product.previewStatus?1:0,this.form.product.publishStatus=this.form.product.publishStatus?1:0,this.form.product.recommendStatus=this.form.product.recommendStatus?1:0,this.form.product.verifyStatus=this.form.product.verifyStatus?1:0,this.form.product.serviceIds=this.serviceList.join(","),this.$route.query.id?Object(s["i"])(this.form).then((function(e){console.log(e),e.success?(t.$message.success("修改商品信息成功"),t.$router.push("/goodsManage")):t.$message.error("修改商品信息失败")})):Object(s["a"])(this.form).then((function(e){console.log(e),e.success?(t.$message.success("新增商品成功"),t.$router.push("/goodsManage")):t.$message.error("新增商品失败")}))},delSku:function(t){var e=this.form.pmsSkuStockList.findIndex((function(t){t.ids}));this.form.pmsSkuStockList.splice(e,1)},uploadSkuPic:function(t,e){console.log(t,e);var o=this.form.pmsSkuStockList.find((function(t){t.ids}));console.log(o),o.pic=t.data.fileUrl},generateSkuList:function(){var t=this;this.$confirm("此操作将清空sku列表, 并生成新的列表, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$message({type:"success",message:"创建成功!"});var e=[];t.selectedColor.forEach((function(o){t.selectedSize.forEach((function(t){var i={ids:k(),createTime:"",id:"",lockStock:0,lowStock:0,modifyTime:"",pic:"",price:0,productId:"",promotionPrice:0,sale:0,skuCode:"",spData:[{key:"颜色",value:o},{key:"大小",value:t}],stock:0};e.push(i)}))})),console.log(e),t.form.pmsSkuStockList=e})).catch((function(){t.$message({type:"info",message:"已取消"})}))},addColor:function(){this.colorList.push({id:k(),val:this.color})},delColor:function(t){this.colorList.splice(t,1)},addSize:function(){this.sizeList.push({id:k(),val:this.size})},delSize:function(t){this.sizeList.splice(t,1)},handleExceed:function(t,e){console.log(t,e),this.$message({message:"上传文件数量最多为5个",type:"warning"})},handleRemove:function(t,e){console.log(t,e);try{this.AlbumList.splice(this.AlbumList.indexOf(t.response.data.fileUrl),1),this.form.product.albumPics=this.AlbumList.join(",")}catch(o){this.form.product.albumPics=e.map((function(t){return t.url})).join(",")}},handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},getAlbumUrl:function(t){console.log(t),this.AlbumList.push(t.data.fileUrl),this.form.product.albumPics=this.AlbumList.join(",")},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,o=t.size/1024/1024<2;return e||this.$message.error("上传的图片只能是 JPG 或 PNG 格式!"),o||this.$message.error("上传的图片大小不能超过 2MB!"),e&&o},getCoverUrl:function(t){console.log(t),this.form.product.pic=t.data.fileUrl},getBrandName:function(t){this.form.product.brandName=this.brandList.find((function(e){return e.id===t})).name},getCategoryName:function(t,e){this.form.product.productCategoryName=this.categoryList.find((function(e){return e.id===t})).name},prevStep:function(){0!==this.active&&this.active--},nextStep:function(){2!==this.active&&this.active++},init:function(){var t=this;Object(l["a"])().then((function(e){console.log(e),t.categoryList=e.data.items.find((function(t){return"乐居"===t.category.name})).children})),Object(n["a"])().then((function(e){console.log(e),t.brandList=e.data.items})),this.form.product.newStatus=!!this.form.product.newStatus,this.form.product.previewStatus=!!this.form.product.previewStatus,this.form.product.publishStatus=!!this.form.product.publishStatus,this.form.product.recommendStatus=!!this.form.product.recommendStatus,this.form.product.verifyStatus=!!this.form.product.verifyStatus,this.serviceList=this.form.product.serviceIds.split(",")}}},C=S,_=(o("ae94"),o("cba8")),x=Object(_["a"])(C,r,a,!1,null,"7b572c26",null);e["default"]=x.exports},"3ef3":function(t,e,o){"use strict";var i=o("88d4"),r=o("34cd").findIndex,a=o("d421"),s="findIndex",l=!0;s in[]&&Array(1)[s]((function(){l=!1})),i({target:"Array",proto:!0,forced:l},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},"40a2":function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var i=o("b775");function r(){return Object(i["a"])({url:"/lejuAdmin/category/getAllCategory"})}},5278:function(t,e,o){"use strict";o("c404")},8256:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[o("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),o("div",{staticClass:"editor-custom-btn-container"},[o("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1)])},r=[],a=(o("d3af"),o("51b3"),o("4c1e"),o("bbe2"),o("89a8"),o("1a91"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"upload-container"},[o("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" upload ")]),o("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[o("el-upload",{staticClass:"editor-slide-upload",attrs:{multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"https://httpbin.org/post","list-type":"picture-card"}},[o("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" Click upload ")])],1),o("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" Cancel ")]),o("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" Confirm ")])],1)],1)}),s=[],l=(o("c93c"),o("8ea3"),o("b110"),o("fe35"),o("7216"),o("609b"),{name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[]}},methods:{checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var o=e.uid,i=Object.keys(this.listObj),r=0,a=i.length;r<a;r++)if(this.listObj[i[r]].uid===o)return this.listObj[i[r]].url=t.files.file,void(this.listObj[i[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,o=Object.keys(this.listObj),i=0,r=o.length;i<r;i++)if(this.listObj[o[i]].uid===e)return void delete this.listObj[o[i]]},beforeUpload:function(t){var e=this,o=window.URL||window.webkitURL,i=t.uid;return this.listObj[i]={},new Promise((function(r,a){var s=new Image;s.src=o.createObjectURL(t),s.onload=function(){e.listObj[i]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},r(!0)}))}}}),n=l,c=(o("5278"),o("cba8")),u=Object(c["a"])(n,a,s,!1,null,"3dae379b",null),d=u.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],m=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],h=f,b=o("ebb4"),v=(o("8fec"),[]);function g(){return window.tinymce}var y=function(t,e){var o=document.getElementById(t),i=e||function(){};if(!o){var r=document.createElement("script");r.src=t,r.id=t,document.body.appendChild(r),v.push(i);var a="onload"in r?s:l;a(r)}function s(e){e.onload=function(){this.onerror=this.onload=null;var t,o=Object(b["a"])(v);try{for(o.s();!(t=o.n()).done;){var i=t.value;i(null,e)}}catch(r){o.e(r)}finally{o.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,o=Object(b["a"])(v);try{for(o.s();!(e=o.n()).done;){var i=e.value;i(null,t)}}catch(r){o.e(r)}finally{o.f()}v=null}}}o&&i&&(g()?i(null,o):v.push(i))},k=y,w=o("eca9"),S="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",C={name:"Tinymce",components:{editorImage:d},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;k(S,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:h,menubar:this.menubar,plugins:m,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(o){e.value&&o.setContent(e.value),e.hasInit=!0,o.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",o.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))},convert_urls:!1,images_upload_handler:function(t,e,o,i){i(0);var r=new FormData;r.append("file",t.blob()),Object(w["c"])(r).then((function(t){console.log(t),e(t.data.fileUrl),i(100)}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){return window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},_=C,x=(o("bd3e"),Object(c["a"])(_,i,r,!1,null,"c27c84d0",null));e["a"]=x.exports},"993f":function(t,e,o){"use strict";var i=o("88d4"),r=o("8735"),a=o("1c34"),s=o("58db"),l=o("126a"),n=o("ac3c"),c=o("492f"),u=o("c40a"),d=o("3a6d"),p=d("splice"),m=r.TypeError,f=Math.max,h=Math.min,b=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var o,i,r,d,p,g,y=n(this),k=l(y),w=a(t,k),S=arguments.length;if(0===S?o=i=0:1===S?(o=0,i=k-w):(o=S-2,i=h(f(s(e),0),k-w)),k+o-i>b)throw m(v);for(r=c(y,i),d=0;d<i;d++)p=w+d,p in y&&u(r,d,y[p]);if(r.length=i,o<i){for(d=w;d<k-i;d++)p=d+i,g=d+o,p in y?y[g]=y[p]:delete y[g];for(d=k;d>k-i+o;d--)delete y[d-1]}else if(o>i)for(d=k-i;d>w;d--)p=d+i-1,g=d+o-1,p in y?y[g]=y[p]:delete y[g];for(d=0;d<o;d++)y[d+w]=arguments[d+2];return y.length=k-i+o,r}})},ae94:function(t,e,o){"use strict";o("c789")},bd3e:function(t,e,o){"use strict";o("d341")},c404:function(t,e,o){},c789:function(t,e,o){},d341:function(t,e,o){},dabb:function(t,e,o){"use strict";o.d(e,"a",(function(){return r}));var i=o("b775");function r(){return Object(i["a"])({url:"/lejuAdmin/brand/findAllBrand"})}},eca9:function(t,e,o){"use strict";o.d(e,"c",(function(){return r})),o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return s}));o("b3d9");var i=o("b775");function r(t){return Object(i["a"])({url:"/lejuAdmin/material/uploadFileOss",method:"post",data:t})}function a(t,e){return Object(i["a"])({url:"/lejuAdmin/material/findMaterialByPage/".concat(t,"/").concat(e)})}function s(t){return Object(i["a"])({url:"/lejuAdmin/material/delMaterial/".concat(t),method:"delete"})}},f3b6:function(t,e,o){"use strict";o.d(e,"d",(function(){return r})),o.d(e,"e",(function(){return a})),o.d(e,"g",(function(){return s})),o.d(e,"f",(function(){return l})),o.d(e,"h",(function(){return n})),o.d(e,"b",(function(){return c})),o.d(e,"a",(function(){return u})),o.d(e,"c",(function(){return d})),o.d(e,"i",(function(){return p}));o("b3d9");var i=o("b775");function r(t,e,o){return Object(i["a"])({url:"/lejuAdmin/product/productsByPage/".concat(t,"/").concat(e),method:"post",data:o})}function a(t){return Object(i["a"])({url:"/lejuAdmin/product/switchNewStatus",method:"post",data:t})}function s(t){return Object(i["a"])({url:"/lejuAdmin/product/switchRecommandStatus",method:"post",data:t})}function l(t){return Object(i["a"])({url:"/lejuAdmin/product/switchPublishStatus",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/lejuAdmin/product/switchVerifyStatus",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/lejuAdmin/product/del/".concat(t),method:"delete"})}function u(t){return Object(i["a"])({url:"/lejuAdmin/product/addProductAndSkus",method:"post",data:t})}function d(t){return Object(i["a"])({url:"/lejuAdmin/product/productSkusDetail/".concat(t)})}function p(t){return Object(i["a"])({url:"/lejuAdmin/product/updateProductAndSkus",method:"post",data:t})}}}]);